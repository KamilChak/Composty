{% extends 'composter_Base.html' %}
{% load static %}

{% block title %}Calendar{% endblock %}

{% block content %}

<style>
    .calendar th {
    background-color: rgb(13, 40, 122);
    color: white;
    font-weight: 900;
}  
.calendar th, .calendar td {
    border: 1px solid #ccc;
    padding: 20px;
    text-align: center;
    position: relative;
    width: calc(100% / 7);
}
.calendar td .number {
    position: absolute;
    top: 10px;
    left: 10px;
    font-size: 16px;
    font-weight: bold;
    text-align: left;
}
.calendar td .data {
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    font-size: 14px;
    font-weight: normal;
    text-align: center;
}
.calendar tbody {
    height: 400px;
    overflow-y: scroll;
}
tbody td {
    height: 140px;
    vertical-align: middle;
}
.calendar tbody td:empty {
    background-color: rgb(227, 225, 225);
}
.today {
    color: red;
    font-size: 28px !important;
  }
  
</style>

  <div class="container">
    <h1 id="calendar-heading">Your Calendar</h1>
    <table class="table calendar">
      <thead>
        <tr>
          <th>Monday</th>
          <th>Tuesday</th>
          <th>Wednesday</th>
          <th>Thursday</th>
          <th>Friday</th>
          <th>Saturday</th>
          <th>Sunday</th>
        </tr>
      </thead>
      <tbody id="calendar-body">
      </tbody>
    </table>
  </div>

  <script>
    
    const today = new Date();
    const currentMonth = today.getMonth();
    const currentYear = today.getFullYear();
    const daysInMonth = new Date(currentYear, currentMonth + 1, 0).getDate();

    let html = '';
    let dayCounter = 1;
    for (let i = 0; i < 6; i++) {
      html += '<tr>';
      for (let j = 0; j < 7; j++) {
        if (i === 0 && j < new Date(currentYear, currentMonth, 1).getDay()) {
          html += '<td></td>';
        } else if (dayCounter > daysInMonth) {
          html += '<td></td>';
        } else {
          html += '<td>';
          if (dayCounter === today.getDate() && currentMonth === today.getMonth()) {
            html += '<span class="number today">' + dayCounter + '</span>';
          } else {
            html += '<span class="number">' + dayCounter + '</span>';
          }
          html += '<span class="data">greener data</span>';
          html += '</td>';
          dayCounter++;
        }
      }
      html += '</tr>';
      if (dayCounter > daysInMonth) {
        break;
      }
    }
    
    const monthName = today.toLocaleString('default', { month: 'long' });
  
    const calendarHeading = document.getElementById('calendar-heading');
    calendarHeading.textContent = `Your Calendar - ${monthName} ${currentYear}`;
    
    const calendarBody = document.getElementById('calendar-body');
    calendarBody.innerHTML = html;
  </script>

{% endblock %}
